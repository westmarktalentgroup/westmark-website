#!/bin/bash

# PRE-COMMIT HOOK WITH DESIGN INTENT ENFORCEMENT
# Prevents commits that violate documented design principles

echo "ğŸ”’ Pre-Commit Design Intent Validation"
echo "======================================"

# Run design intent enforcer
if [ -f "../scripts/design-intent-enforcer.sh" ]; then
    ../scripts/design-intent-enforcer.sh
    if [ $? -ne 0 ]; then
        echo ""
        echo "ğŸš¨ COMMIT BLOCKED: Design intent violations detected"
        echo "ğŸ’¡ Fix violations before committing"
        exit 1
    fi
else
    echo "âš ï¸  WARNING: Design intent enforcer not found"
    echo "ğŸ’¡ Run: ./scripts/design-intent-enforcer.sh"
fi

# Run existing protection system
if [ -f "../scripts/protection-system.sh" ]; then
    ../scripts/protection-system.sh
    if [ $? -ne 0 ]; then
        echo ""
        echo "ğŸš¨ COMMIT BLOCKED: Protection system violations detected"
        exit 1
    fi
else
    echo "âš ï¸  WARNING: Protection system not found"
fi

echo "âœ… Pre-commit validation passed!"
echo "ğŸš€ Ready to commit"